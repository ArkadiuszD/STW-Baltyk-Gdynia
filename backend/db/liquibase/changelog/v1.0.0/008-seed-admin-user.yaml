databaseChangeLog:
  # ============================================================================
  # Seed Data - Initial admin user
  # ============================================================================

  - changeSet:
      id: seed-001-admin-user
      author: stw-baltyk
      comment: Create initial admin user
      context: "!test"
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT COUNT(*) FROM users WHERE email = 'admin@stwbaltyk.pl'
      changes:
        - insert:
            tableName: users
            columns:
              - column:
                  name: email
                  value: admin@stwbaltyk.pl
              - column:
                  name: password_hash
                  # bcrypt hash for "Admin123" - use set_password() to generate new hashes
                  value: "$2b$12$8kRTw9n2EqrtDfixOgtCsuD.as7wIcHP/0skYyM14XxJ9IJzFoOfG"
              - column:
                  name: first_name
                  value: Administrator
              - column:
                  name: last_name
                  value: STW
              - column:
                  name: role
                  value: ADMIN
              - column:
                  name: is_active
                  valueBoolean: true
      rollback:
        - delete:
            tableName: users
            where: email = 'admin@stwbaltyk.pl'
